<!DOCTYPE html>
<html lang="en" style="font-size:100%">
    <head>
        <title>Versatile</title>
        <!--這裡是註解，meta name="tile"與meta name="desciption"是goole搜尋下的網頁標題與描述-->
        <meta name="title" content="中央大學附屬中壢高級中學數理資優班成果發表會「Versatile」宣傳網站" />

        <meta charset:"utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
        <meta name="language" , content="tw" />
    </head>
    <style>

    body{
        overflow-y: scroll;
        overflow-x: hidden;
        margin:0;
        padding:0;
    }
    @font-face{
        font-family:cute;
        src:url("fonts/NewFont.ttf");
    }
    </style>
    <body>
        
        <div id="root">
            <div class="titleBar">
                <div class = "title_row">
                    <p class="subtitle">中大壢中成果發表會</p>
                    <p class="title">Versatile</p>
                </div>
                <div class="count_text">
                    <p>month</p>
                    <p>day</p>
                    <p>hour</p>
                    <p>min</p>
                    <p>sec</p>
                </div>
                <ul class="count_down">
                    <li>00</li>
                    <li>00</li>
                    <li>00</li>
                    <li>00</li>
                    <li>00</li>
                </ul>
                
                
            </div>
            <style>
                
                .title_row{
                    display:flex;
                    flex-direction:column;
                    justify-content:center;
                    text-align:center;
                    height:150px;
                }
                .subtitle{
                    font-size:24px;
                    font-family:cute;
                }
                .title{
                    font-family:cute;
                    font-size:50px; 
                }

                .titleBar ul{
                    display:flex;
                    justify-content:center;
                    align-items:center;
                    text-align:center;
                    height:150px;
                    list-style:none;
                }
                
                .titleBar li{
                    display: inline-block;
                    margin:50px;
                    font-family:cute;
                    font-size:36px;
                    transform:translate(-50%, 0);
                }
                .count_text{
                    height:10px;
                    
                }
                .count_text p{
                    position:absolute;
                    font-family:cute;
                    font-size:36px;
                    left : 50%; 
                    line-height:10px;
                    transform:translate(-50%, 0);
                }
                .count_text p:nth-child(1){
                   margin-left:-272px;
                }
                .count_text p:nth-child(2){
                    margin-left:-136px;
                }
                .count_text p:nth-child(3){
                    
                }
                .count_text p:nth-child(4){
                    margin-left:136px;
                }
                .count_text p:nth-child(5){
                    margin-left:272px;
                }
                
                
                
                
                @media screen and (orientation:portrait){
                    .title{
                        font-size:40px;
                    }
                    .title_row{
                        height:100px;
                    }
                    .count_text p{
                        position:absolute;
                        font-family:cute;
                        font-size:32px;
                        left : 50%; 
                        line-height:10px;
                        transform:translate(-50%, 0);
                    }
                    .count_text p:nth-child(1){
                        margin-left:-115px;
                        top:285px;
                    }
                    .count_text p:nth-child(2){
                        margin-left:0px;
                        top:285px;
                    }
                    .count_text p:nth-child(3){
                        margin-left:115px;
                        top:285px;
                    }
                    .count_text p:nth-child(4){
                        margin-left:-57px;
                        top:390px;
                    }
                    .count_text p:nth-child(5){
                        margin-left:57px;
                        top:390px;

                    }
                    .titleBar ul{
                        padding:75px 0 0;
                        flex-wrap:wrap;
                        height:200px;
                        
                    }
                    .titleBar li{
                        margin:40px;
                        font-size:32px;
                        line-height:10px;
                        transform:translate(0, 0);
                    }
                }
                @media screen and (orientation:landscape){
                    .title{
                        font-size:40px;
                    }
                }
            </style>
            <script>
                const report = new Date(2024, 4, 27, 8, 0, 0);
                var list = document.querySelectorAll(".count_down li");
                
                timer();
                var timeId = setInterval(timer, 1000);
                    
                function timer(){
                    var time_now = Date.now();
                    var timeDiff = report.getTime() - time_now;
                    let dayNum = Math.floor(timeDiff / 1000 / 60 / 60 / 24);
                    timeDiff -= dayNum * 1000 * 60 * 60 * 24;
                    let hourNum = Math.floor(timeDiff / 1000 / 60 / 60);
                    timeDiff -= hourNum * 1000 * 60 * 60;
                    let minNum = Math.floor(timeDiff / 1000 / 60);
                    timeDiff -= minNum * 1000 * 60;
                    let secNum = Math.floor(timeDiff / 1000);
                    
                    if(dayNum < 10){
                        dayNum = "0" + dayNum;
                    }
                    if(hourNum < 10){
                        hourNum = "0" + hourNum;
                    }
                    if(minNum < 10){
                        minNum = "0" + minNum;
                    }
                    if(secNum < 10){
                        secNum = "0" + secNum;
                    }
                    list[0].innerText = "00";
                    list[1].innerText = dayNum;
                    list[2].innerText = hourNum;
                    list[3].innerText = minNum;
                    list[4].innerText = secNum;
                }
                
            </script>
            <div class= "program">
                <div class="prpgram-title">
                    <p>this is program title</p>
                </div>
                <div class="program-content">
                    <p class="program-subtitle">subtitle</p>
                    <p class="program-text">blank</p>
                    <p class="program-text">text</p>
                    <p class="program-text">text</p>
                    <p class="program-text">text</p>
                    <p class="program-text">blank</p>
                    <p class="program-subtitle">subtitle</p>
                    <p class="program-text">blank</p>
                </div>
            </div>
            <style>
                .program{
                    height:800px;
                    width:100%
                }
                .program-title{
                    display:flex;
                    justify-content:center;
                    align-items:center;
                    text-align:center;
                    height:150px;
                }
                .program-title p{
                    font-family:cute;
                }
            </style>
            <div class="introduce">
                <button class="left">left</button>
                <button class="right">right</button>
                <div class="item" style="left:-100%">
                    <div class="item-title">
                        <p>數學組0</p>
                    </div>
                    <div class="item-text">
                        <p>在此增加簡介...</p>
                    </div>
                    <div class="pdf-show">
                        <object data="https://drive.google.com/file/d/1dusbc-ORDy8fe5BhmITlAvDVBqZ85UZt/preview" height="300"></object>
                    </div>
                </div>
                <div class="item" id="current">
                    <div class="item-title">
                        <p>數學組1</p>
                    </div>
                    <div class="item-text">
                        <p>在此增加簡介...</p>
                    </div>
                    <div class="pdf-show">
                        <object data="https://drive.google.com/file/d/1dusbc-ORDy8fe5BhmITlAvDVBqZ85UZt/preview" height="300"></object>
                    </div>
                </div>
                <div class="item" style="left:100%">
                    <div class="item-title">
                        <p>數學組2</p>
                    </div>
                    <div class="item-text">
                        <p>在此增加簡介...</p>
                    </div>
                    <div class="pdf-show">
                        <object data="https://drive.google.com/file/d/1dusbc-ORDy8fe5BhmITlAvDVBqZ85UZt/preview" height="300"></object>
                    </div>
                </div>
                
            </div>
            <style>
            .introduce{
                position:relative;
                height:500px;
                margin:0;
                padding:0;
                width:100%;
                overflow:hidden;
            }
            .item{
                position:absolute;
                display:block;
                width:100%;
                height:500px;
            }
            .item-title{
                height:100px;
                display:flex;
                align-items:center;
                justify-content:center;
            }
            .item-title p{
                font-family:cute;
                font-size:2rem;
            }
            .item-text{
                display:flex;
                
                align-items:center;
                justify-content:center;
            }
            .item-text p{
                font-size:1rem;
            }
            .pdf-show{
                display:flex;
                align-items:center;
                justify-content:center;
            }
            .pdf-show object{
                width:600px;
            }

            @media screen and (orientation:portrait){
                .introduce button{
                    display:none;
                }
                .pdf-show object{
                    width:100%;
                }
            }
            .left:hover{
                background-color:#989898;
            }
            .left:active{
                background-color:#ffffff;
            }
            
            </style>
            <script>
            const speed = 0.05;

            var current = document.querySelector("#current");
            var list_item = document.querySelectorAll('.item');
            var lerping = [];
            var startX = 0;
            var lock = 0;

            function findRole() {
                let Index = -1;
                for (let i = 0; i < list_item.length; i++) {
                    if (list_item[i].id == "current") {
                        Index = i;
                    }
                }
                let output = [];
                if (Index - 1 < 0) {
                    output.push(list_item.length - 1);
                }
                else {
                    output.push(Index - 1);
                }
                output.push(Index)
                if (Index + 1 >= list_item.length) {
                    output.push(0);
                }
                else {
                    output.push(Index + 1);
                }
                return output;
            }
            function start(e) {
                startX = e.targetTouches[0].pageX;
            }
            function move(e) {
                if(lock === 1){
                    return;
                }
                for(let i = 0; i < lerping.length; i++){
                    list_item[lerping[i][0]].style.left = lerping[i][2] + "px";
                    clearInterval(lerping[i][1]);
                }
                lerping = [];
                let Index = findRole();
                //[0,1,2] = [previous, current, next]
                var centerMove = (e.targetTouches[0].pageX - startX);
                list_item[Index[1]].style.left = centerMove + "px";
                if (centerMove < 0) {
                    list_item[Index[0]].style.left = window.innerWidth * -1 +"px";
                    list_item[Index[2]].style.left = centerMove + window.innerWidth + "px";
                }
                else {
                    list_item[Index[2]].style.left = window.innerWidth + "px";
                    list_item[Index[0]].style.left = centerMove - window.innerWidth + "px";
                }

            }
            function lerp(a, b, alpha) {
                let dist = (b - a);
                
                return a + alpha * dist;
            }
            function lerpMove(listI, endPos) {
                let pushed = 0;
                let startPos = list_item[listI].offsetLeft;
                let timerId = setInterval(function () {
                    if(pushed === 0){
                        lerping.push([listI, timerId, endPos]);
                        pushed = 1;
                    }
                    if (Math.abs(list_item[listI].offsetLeft - endPos) < 0.3*Math.abs(startPos - endPos)) {
                        //(endPos - (startPos + 0.7*(endPos - startPos))) = 0.3*endPos - 0.3*startPos
                        list_item[listI].style.left = list_item[listI].offsetLeft+0.1 * (0.3*endPos - 0.3*startPos) + "px";
                        
                        if(Math.abs(list_item[listI].offsetLeft - endPos) < 0.1
                           || (list_item[listI].offsetLeft - endPos) * (startPos - endPos) < 0){
                            list_item[listI].style.left = endPos + "px";
                            
                            for(let i = 0; i < lerping.length; i++){
                            if(lerping[i][1] == timerId){
                                lerping.splice(i, i);
                            }
                        }
                        clearInterval(timerId);
                        }
                    }
                    else{
                        list_item[listI].style.left = lerp(list_item[listI].offsetLeft, endPos, speed) + "px";
                    }
                }, 2);
            }
            function back() {
                let Index = findRole();

                lerpMove(Index[1], 0);
                lerpMove(Index[0], window.innerWidth * -1);
                lerpMove(Index[2], window.innerWidth);
            }
            
            function end(e) {

                let Index = findRole();

                if (list_item[Index[1]].offsetLeft >= 0.3 * window.innerWidth) {

                    lerpMove(Index[1], window.innerWidth);
                    lerpMove(Index[0], 0);
                    
                    list_item[Index[0]].id = "current";
                    list_item[Index[1]].id = "";
                    list_item[Index[0]].addEventListener('touchstart', start);
                    list_item[Index[0]].addEventListener('touchmove', move);
                    list_item[Index[0]].addEventListener('touchend', end);
                    list_item[Index[1]].removeEventListener('touchstart', start);
                    list_item[Index[1]].removeEventListener('touchmove', move);
                    list_item[Index[1]].removeEventListener('touchend', end);
                }
                else if (this.offsetLeft <= -0.3 * window.innerWidth) {
                    lerpMove(Index[1], window.innerWidth * -1);
                    lerpMove(Index[2], 0);
                    list_item[Index[2]].id = "current";
                    list_item[Index[1]].id = "";
                    list_item[Index[2]].addEventListener('touchstart', start);
                    list_item[Index[2]].addEventListener('touchmove', move);
                    list_item[Index[2]].addEventListener('touchend', end);
                    list_item[Index[1]].removeEventListener('touchstart', start);
                    list_item[Index[1]].removeEventListener('touchmove', move);
                    list_item[Index[1]].removeEventListener('touchend', end);
                }
                else {
                    back();
                }
            }
            //https://stackoverflow.com/questions/5498934/detect-change-in-orientation-using-javascript
           window.addEventListener("DOMContentLoaded", () =>{
               var screenOrientation = screen.orientation.type;
               if(screenOrientation === "landscape-primary" || screenOrientation ==="landscape-secondary"){
                    lock = 1;
                }
                else{
                    lock = 0;
                }
               if (screen && screen.orientation !== null) {
                    window.onorientationchange = function (event) {
                        screenOrientation = screen.orientation.type;
                        let Index = findRole();
                        list_item[Index[1]].style.left = 0 + "px";
                        list_item[Index[0]].style.left = 100 * -1 + "%";
                        list_item[Index[2]].style.left = 100 + "%";
                        if(screenOrientation === "landscape-primary" || screenOrientation ==="landscape-secondary"){
                            lock = 1;
                        }
                        else{
                            lock = 0;
                        }
                    }

               }         
            } );
            
            current.addEventListener('touchstart', start);
            current.addEventListener('touchmove', move);
            current.addEventListener('touchend', end);

            leftBtn = document.querySelector('.left');
            rightBtn = document.querySelector('.right');
            leftBtn.addEventListener('click', ()=>{
                let Index = findRole();
                for(let i = 0; i < lerping.length; i++){
                    list_item[lerping[i][0]].style.left = lerping[i][2] + "px";
                    clearInterval(lerping[i][1]);
                }
                for (let i = 0; i < list_item.length; i++)
                {
                    list_item[i].style.left = window.innerWidth + "px";
                }
                list_item[Index[2]].style.left = window.innerWidth + "px";
                list_item[Index[1]].style.left = 0 + "px";
                lerpMove(Index[1], window.innerWidth * -1);
                lerpMove(Index[2], 0);
                list_item[Index[2]].id = "current";
                list_item[Index[1]].id = "";
                list_item[Index[2]].addEventListener('touchstart', start);
                list_item[Index[2]].addEventListener('touchmove', move);
                list_item[Index[2]].addEventListener('touchend', end);
                list_item[Index[1]].removeEventListener('touchstart', start);
                list_item[Index[1]].removeEventListener('touchmove', move);
                list_item[Index[1]].removeEventListener('touchend', end);
            });
            rightBtn.addEventListener('click', ()=>{
                let Index = findRole();
                for(let i = 0; i < lerping.length; i++){
                    list_item[lerping[i][0]].style.left = lerping[i][2] + "px";
                    clearInterval(lerping[i][1]);
                }
                for (let i = 0; i < list_item.length; i++)
                {
                    list_item[i].style.left = window.innerWidth + "px";
                }
                list_item[Index[0]].style.left = window.innerWidth * -1 + "px";
                list_item[Index[1]].style.left = 0 + "px";
                lerpMove(Index[1], window.innerWidth);
                lerpMove(Index[0], 0);
                list_item[Index[0]].id = "current";
                list_item[Index[1]].id = "";
                list_item[Index[0]].addEventListener('touchstart', start);
                list_item[Index[0]].addEventListener('touchmove', move);
                list_item[Index[0]].addEventListener('touchend', end);
                list_item[Index[1]].removeEventListener('touchstart', start);
                list_item[Index[1]].removeEventListener('touchmove', move);
                list_item[Index[1]].removeEventListener('touchend', end);
            });

        </script>
            <div class="About-us">
                <div class = "About-title">
                    <p>About us</p>
                </div>
                <ul class = "About-content">
                    <li>主辦單位：國立中央大學附屬中壢高中</li>
                    <li>指導單位：</li>
                    <li>協辦單位：</li>
                    <li>贊助單位：逗點文創事業有限公司</li>
                    <li>校網網址：</li>
                </ul>
            </div>
            <style>
            .About-us{
                background:#4683B7;
                height:300px;
            }
            .About-title{
                height:75px;
                display:flex;
                align-items:center;
            }
            .About-us p {
                padding-top:2%;
                margin-left:20px;
                font-family:cute;
                font-size:24px;
                color:#FFFFFF;
            }
            .About-us li{
                font-family:cute;
                color:#FFFFFF;
            }
            </style>
        </div>
    </body>
</html>
